# AGENTS.md

## リポジトリ運用ルール
- `repo_clone/` ディレクトリは参照専用です。既存ファイルの変更・削除・上書きは絶対に行わないでください。
- 新規ファイルや改修はルート直下、または `long_form/` など任意の新規ディレクトリで管理します。
- `requirements.md` に記載したロング動画要件を優先し、ショート動画用コードは必要部分のみを適切に移植してください。
- 外部APIキーや機密情報は直接コミットしないでください。必要な場合は `.env.example` などにダミー値を記載します。
- 変更点はコメントやログでわかりやすく残し、長尺処理の進捗やエラーはログ出力を徹底してください。

## 作業フロー推奨
1. 参考が必要な場合は `repo_clone/` 内のコードを読み、必要な関数やクラスを新実装に転記。
2. `timeline_builder.py` など長尺用の新規モジュールをルート直下に追加し、ロング動画のタイムライン制御を実装。
3. `requirements.md` を定期的に確認・更新し、要件変更があればチームへ共有。
4. 長時間レンダリングを行う前に小規模サンプルで検証し、`logs/` に結果を保存。

## 注意事項
- 既存のショート動画仕様（縦型・60秒）と混在しないよう、設定値やディレクトリ構造を明確に分けてください。
- 作業ログや自動生成結果は `output/` 配下に保存し、不要な一時ファイルはクリーンアップツールで削除します。
- わからない点や衝突が発生した場合は、`repo_clone.md` の解析メモや `requirements.md` を参照し、必要に応じて更新してください。

このドキュメントの指針に従い、ロング動画制作向けの開発を安全かつ効率的に進めてください。

## feature/a ブランチメモ
- DeepInfra 連携の長所と課題を整理し、長尺パイプラインに統合する。 
- テスト用に `test/test_deepinfra_client.py` を整備し、API のレート制限をログに記録する方針をドラフト化する。

## feature/b ブランチメモ
- `image_provider_factory.py` に新スタイルプリセットを追加し、`pollinations_style/` ディレクトリとの整合を確認する。
- `AGENTS.md` の内容を長尺向けオンボーディングに組み込むため、翻訳版のドラフトを `docs/` 配下に作成する計画を明記する。
